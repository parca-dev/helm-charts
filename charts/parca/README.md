# parca

Open Source Infrastructure-wide continuous profiling

**Homepage:** <https://parca.dev/>

## Source Code

* <https://github.com/parca-dev/helm-charts>

### Usage

Please consult official docs on usage.  
Chart includes prometheus-style discovery rule with annotations:  

If you want k8s prometheus-like scraping for pprof endpoints, all you need is to add annotations for pod:
```
parca.dev/scrape: 'true'
```

to furter adjust scope of scraping, you can use
```
parca.dev/port: 'debug'
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| agent.enabled | bool | `true` | Allows disabling parca agent |
| agent.image.pullPolicy | string | `"IfNotPresent"` | Overrides pullpolicy |
| agent.image.repository | string | `"ghcr.io/parca-dev/parca-agent"` | Overrides the image repository |
| agent.image.tag | string | `"v0.3.0"` | Overrides the image tag |
| agent.logLevel | string | `"info"` | Agent log level |
| agent.nodeSelector | object | `{}` | node selector for scheduling agent pods |
| agent.podAnnotations | object | `{}` | Additional annotations for pods |
| agent.podLabelSelector | string | `""` | label selector for filtering out pods with pprof, ie "parca=enabled" |
| agent.podSecurityContext | object | `{}` | Additional pod secutiry context |
| agent.resources | object | `{}` | resource limits and requests |
| agent.securityContext | object | `{"privileged":true}` | Security context, needs to be prilileged for ful functionality |
| agent.service.port | int | `7071` | service port for agent |
| agent.service.type | string | `"ClusterIP"` | service type for agent |
| agent.serviceMonitor.enabled | bool | `false` | enables prometheus servicemonitor for agent |
| agent.serviceMonitor.jobLabel | string | `"parca-agent"` |  |
| agent.socketPath | string | `"/run/containerd/containerd.sock"` | Path to host docker/containerd/crio socket |
| agent.tolerations | list | `[{"effect":"NoSchedule","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"}]` | node tolerations for scheduling agent pods |
| fullnameOverride | string | `""` | Overrides helm-generated chart fullname |
| imagePullSecrets | list | `[]` | specifies pull secrets for image repository |
| ingress.annotations | object | `{}` | additional annotations for ingress |
| ingress.className | string | `""` | specifies ingress class name (ie nginx) |
| ingress.enabled | bool | `false` | enables ingress for server UI |
| ingress.hosts[0].host | string | `"chart-example.local"` |  |
| ingress.hosts[0].paths[0].path | string | `"/"` |  |
| ingress.hosts[0].paths[0].pathType | string | `"ImplementationSpecific"` |  |
| ingress.tls | list | `[]` |  |
| nameOverride | string | `""` | overrides chart name |
| server.config | object | see values.yaml | parca server config block |
| server.corsAllowedOrigins | string | `"*"` | CORS setting |
| server.image.pullPolicy | string | `"IfNotPresent"` | Overrides pull policy for server |
| server.image.repository | string | `"ghcr.io/parca-dev/parca"` | Overrides the image repository for server |
| server.image.tag | string | `"v0.6.1"` | Overrides the image tag for server |
| server.logLevel | string | `"info"` | logging level of parca server |
| server.nodeSelector | object | `{}` | node selector for scheduling server pod |
| server.podAnnotations | object | `{}` | additional annotations for server pod |
| server.podSecurityContext | object | `{}` | additional security context for server pod |
| server.resources | object | `{}` | resource limits and requests for server pod |
| server.retentionTime | string | `"6h"` | Sets retention period for server TSDB |
| server.scrapeConfigs | list | see values.yaml | scrape configs for parca server |
| server.securityContext | object | `{}` | additional security context for server |
| server.service.port | int | `7070` | service port for server |
| server.service.type | string | `"ClusterIP"` | service type for server |
| server.serviceMonitor.enabled | bool | `false` | enables servicemonitor for server monitoring |
| server.serviceMonitor.jobLabel | string | `"parca-server"` |  |
| server.tolerations | object | `{}` | tolerations for scheduling server pod |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account |
| serviceAccount.create | bool | `true` | Specifies whether a service account should be created |
| serviceAccount.name | string | `""` | The name of the service account to use. If not set and create is true, a name is generated using the fullname template |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.5.0](https://github.com/norwoodj/helm-docs/releases/v1.5.0)
